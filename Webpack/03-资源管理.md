# 资源管理

在 webpack 出现之前，前端开发人员会使用 grunt 和 gulp 等工具来处理资源，并将它们从 /src 文件夹移动到 /dist 或 /build 目录中。

JavaScript 模块也遵循同样方式，但是，像 webpack 这样的工具，将动态打包所有依赖（创建所谓的 依赖图(dependency graph)）。这是极好的创举，因为现在每个模块都可以明确表述它自身的依赖，可以避免打包未使用的模块。

## 加载 CSS

```
npm install --save-dev style-loader css-loader
```

**webpack.config.js**

```js
const path = require("path");

module.exports = {
  entry: "./src/index.js",
  output: {
    filename: "bundle.js",
    path: path.resolve(__dirname, "dist"),
  },
  module: {
    rules: [
      {
        test: /\.css$/i,
        use: ["style-loader", "css-loader"],
      },
    ],
  },
};
```

模块 loader 可以链式调用。链中的每个 loader 都将对资源进行转换。链会逆序执行。第一个 loader 将其结果（被转换后的资源）传递给下一个 loader，依此类推。最后，webpack 期望链中的最后的 loader 返回 JavaScript。

应保证 loader 的先后顺序：'style-loader' 在前，而 'css-loader' 在后。如果不遵守此约定，webpack 可能会抛出错误。

这使你可以在依赖于此样式的 js 文件中 `import './style.css'`。现在，在此模块执行过程中，含有 CSS 字符串的 `<style>` 标签，将被插入到 `html` 文件的 `<head>` 中。

**src/style.css**

```css
.hello {
  color: red;
}
```

**src/index.js**

```js
import _ from "lodash";
import "./style.css";

function component() {
  const element = document.createElement("div");

  // lodash 在当前 script 中使用 import 引入
  element.innerHTML = _.join(["Hello", "webpack"], " ");
  element.classList.add("hello");

  return element;
}

document.body.appendChild(component());
```

检查一下页面，发现 css 被注入到了 head 里面。

```html
<html>
  <head>
    <meta charset="utf-8" />
    <title>资源管理</title>
    <style>
      .hello {
        color: red;
      }
    </style>
  </head>
  <body>
    <script src="bundle.js"></script>
    <div class="hello">Hello webpack</div>
  </body>
</html>
```

## 加载 images 图像

https://www.webpackjs.com/guides/asset-modules/

可以使用内置的 Asset Modules，我们可以轻松地将这些内容混入我们的系统中：

```js
{
    test: /\.(png|svg|jpg|jpeg|gif)$/i,
    type: 'asset/resource',
},
```
**src/index.js**
```js
import _ from 'lodash';
import Icon from "./webpack-concept.png";
import "./style.css";

function component() {
  const element = document.createElement("div");

  // lodash 在当前 script 中使用 import 引入
  element.innerHTML = _.join(["Hello", "webpack"], " ");
  element.classList.add("hello");

  // 将图像添加到我们已经存在的 div 中。
  const myIcon = new Image();
  myIcon.src = Icon;

  element.appendChild(myIcon);

  return element;
}

document.body.appendChild(component());
```

**src/style.css**
```css
.hello {
  color: red;
  background: url('./webpack-concept.png');
}
```

## 加载 fonts 字体

## 加载数据
如 JSON 文件，CSV、TSV 和 XML.